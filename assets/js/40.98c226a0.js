(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{638:function(e,t,_){"use strict";_.r(t);var v=_(11),r=Object(v.a)({},(function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h3",{attrs:{id:"_1-前言"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-前言"}},[e._v("#")]),e._v(" 1. 前言")]),e._v(" "),_("p",[e._v("​\t实习期间我参与了一个公司内部产品协作平台designhub的开发，其核心功能是产品经理和UI设计师可以上传对应产品的需求文档和原型图，技术人员可以在线预览并给出评审意见，双方也可以对评审意见进行评论。预览的文件类型包括word、pdf以及axure工具导出的html文件，后端技术选型为"),_("code",[e._v("egg.js")]),e._v(" + ORM框架"),_("code",[e._v("Sequelize")]),e._v(" + "),_("code",[e._v("MySQL")]),e._v(" + "),_("code",[e._v("Minio")]),e._v("对象存储，前端技术选型为"),_("code",[e._v("vue3")]),e._v("+"),_("code",[e._v("Element-plus")]),e._v("+"),_("code",[e._v("TS")]),e._v("。大致流程就是产品经理在前端上传文件，后端接收后存储到minio里，预览是通过直接在iframe中打开文件。")]),e._v(" "),_("h3",{attrs:{id:"_2-crud"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-crud"}},[e._v("#")]),e._v(" 2. CRUD")]),e._v(" "),_("p",[e._v("​\t后端整体上遵循MVC架构，提供Restful风格的接口，分为controller、service、model层。")]),e._v(" "),_("p",[e._v("​\t评审需求中涉及到review、review_item表。")]),e._v(" "),_("p",[e._v("​\t事务（保证操作的原子性）：如一次操作要修改多个表")]),e._v(" "),_("p",[e._v("​\t封装baseContoller，统一返回格式，统一错误处理")]),e._v(" "),_("p",[e._v("​\t遇到的坑：forEach中await不会按顺序执行  -> 改用Promise.all")]),e._v(" "),_("h3",{attrs:{id:"_3-文件上传"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-文件上传"}},[e._v("#")]),e._v(" 3. 文件上传")]),e._v(" "),_("p",[e._v("由于业务不会涉及到很大的文件上传，所以没有做太多大文件上传的处理。")]),e._v(" "),_("p",[e._v("https://mp.weixin.qq.com/s/DhirOMKMHR8hzmDnrkLTFw")]),e._v(" "),_("h3",{attrs:{id:"_4-容器化部署"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-容器化部署"}},[e._v("#")]),e._v(" 4. 容器化部署")]),e._v(" "),_("p",[e._v("docker  docker-compose")]),e._v(" "),_("h3",{attrs:{id:"_5-前端预览"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-前端预览"}},[e._v("#")]),e._v(" 5. 前端预览")]),e._v(" "),_("p",[e._v("​\t要做到用户在文档上双击就可以在当前位置创建一个评审框，就需要记录当前点击的位置，当然可以通过e.offsetX和e.offsetY来获得。但是主要遇到的问题是使用iframe进行的文件预览，如果我们直接通过点击事件获取位置的话没有办法获取到在iframe中的准确位置，所以需要想办法监听到iframe中页面的滚动事件，对于需求文档和原型图的预览还需要监听页面的切换。")]),e._v(" "),_("p",[e._v("​")]),e._v(" "),_("p",[e._v("​")])])}),[],!1,null,null,null);t.default=r.exports}}]);